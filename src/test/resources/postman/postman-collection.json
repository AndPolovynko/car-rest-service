{"info":{"_postman_id":"7bee65bd-1691-4511-a667-aaf80f511774","name":"car-service-api","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"Car API","item":[{"name":"Unauthenticated","item":[{"name":"GET /cars should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"1a7c5692-91b0-4332-b809-368c8fd8e014","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"POST /cars should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"0a951753-67e7-45b4-a3df-ca86bc834f59","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"javascript"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"PUT /cars should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"ae9cf2b9-1d0b-4ea4-a8d7-09f28ee4ad0d","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"javascript"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"DELETE /cars should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"f99b1084-a4ca-4c3d-9bef-6f7bd3f7a8f6","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"javascript"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]}],"id":"f10ea5b6-b149-4ab9-8e46-e4047ae5556e","description":"Test for requests from unauthenticated user."},{"name":"User","item":[{"name":"Receive user access token","event":[{"listen":"test","script":{"id":"517bca2e-f202-4b4e-87f8-ffb25dae0aeb","exec":["// Tests","pm.test(\"Keycloak response is 200\", () => pm.expect(pm.response.code).to.equal(200));","pm.test(\"Token exists in response\", () => pm.expect(pm.response.json().access_token).to.exist);","","// Script","try {","    const body = pm.response.json();","    if (body.access_token) {","        pm.collectionVariables.set(\"user-token\", body.access_token);","        console.log(\"Token stored in collection variables.\");","    } else {","        console.log(\"Keycloak error response:\", body);","    }","} catch (e) {","    console.log(\"Failed to parse response:\", e.message, \"Raw text:\", pm.response.text());","}",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d161c7fe-4cc0-4f74-9e69-7fd7b760e113","exec":[""],"type":"text/javascript","packages":{}}}],"id":"bd83626d-a04c-490d-a2cc-37c4fd06cde9","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"urlencoded","urlencoded":[{"key":"grant_type","value":"password","type":"text","uuid":"6acef404-2cbd-4934-8202-32e74c1f7468"},{"key":"client_id","value":"{{car-service-client-id}}","type":"text","uuid":"8b34702f-1f40-4c6b-b62f-dd6448b6fbe1"},{"key":"client_secret","value":"{{car-service-client-secret}}","type":"text","uuid":"2451d0f1-7fe3-4495-a8d6-2871360d9a26"},{"key":"username","value":"{{user-username}}","type":"text","uuid":"91b50d93-83e3-4e45-9419-859c9c2e6190"},{"key":"password","value":"{{user-password}}","type":"text","uuid":"8b47f80b-a75f-42ea-9cac-a8034c4de2ce"}]},"url":{"raw":"{{keycloak-url}}/realms/{{car-service-realm-name}}/protocol/openid-connect/token","host":["{{keycloak-url}}"],"path":["realms","{{car-service-realm-name}}","protocol","openid-connect","token"]}},"response":[]},{"name":"GET /cars should return expected results if no parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","const expected = {","    content: [","        {","            id: \"car001\",","            manufacturerName: \"Alpha Motors\",","            productionYear: 2020,","            model: \"Zeta\",","            categoryNames: [\"Compact\", \"Luxury\"]","        },","        {","            id: \"car002\",","            manufacturerName: \"Beta Cars\",","            productionYear: 2021,","            model: \"Delta\",","            categoryNames: [\"Luxury\"]","        },","        {","            id: \"car003\",","            manufacturerName: \"Gamma Auto\",","            productionYear: 2019,","            model: \"Epsilon\",","            categoryNames: [\"Convertible\"]","        },","        {","            id: \"car004\",","            manufacturerName: \"Alpha Motors\",","            productionYear: 2022,","            model: \"Theta\",","            categoryNames: [\"Compact\"]","        },","        {","            id: \"car005\",","            manufacturerName: \"Beta Cars\",","            productionYear: 2023,","            model: \"Kappa\",","            categoryNames: [\"Luxury\"]","        }","    ],","    page: {","        size: 10,","        number: 0,","        totalElements: 5,","        totalPages: 1","    }","};","","pm.test(\"Response matches expected data\", function () {","    const actual = pm.response.json();","    pm.expect(actual).to.eql(expected);","});"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"b4846e8b-4c56-4d10-a70d-cc5165b26155","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"GET /cars should return expected results if parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","const expected = {","    content: [","        {","            id: \"car003\",","            manufacturerName: \"Gamma Auto\",","            productionYear: 2019,","            model: \"Epsilon\",","            categoryNames: [\"Convertible\"]","        }","    ],","    page: {","        size: 10,","        number: 0,","        totalElements: 1,","        totalPages: 1","    }","};","","pm.test(\"Response matches expected data for model=Epsilon\", function () {","    const actual = pm.response.json();","    pm.expect(actual).to.eql(expected);","});"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"df524b07-66e6-41a4-9fff-9f0be59c5b88","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars?model=Epsilon","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"],"query":[{"key":"model","value":"Epsilon"}]}},"response":[]},{"name":"GET /cars should return car when valid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected car details\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('id', 'car002');","    pm.expect(response).to.have.property('manufacturerName', 'Beta Cars');","    pm.expect(response).to.have.property('productionYear', 2021);","    pm.expect(response).to.have.property('model', 'Delta');","    pm.expect(response.categoryNames).to.eql([\"Luxury\"]);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"90a591b4-0a4f-45bb-a78b-696dc347fba1","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars/car002","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars","car002"]}},"response":[]},{"name":"GET /cars should return not found when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 404\", function () {","    pm.response.to.have.status(404);","});","","pm.test(\"Response matches expected not found error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 404);","    pm.expect(response).to.have.property('message', 'No Resource Found Exception');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"66c69e53-feed-456e-b548-79763df02310","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars/invalid-id","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars","invalid-id"]}},"response":[]},{"name":"POST /cars should return forbidden status code","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 403\", function () {","    pm.response.to.have.status(403);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"e3fe2d1c-fe38-4dee-bd5a-b53a33575508","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"PUT /cars should return forbidden status code","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 403\", function () {","    pm.response.to.have.status(403);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"aab3fc06-32f3-4b12-9e4a-d3b74eae79bf","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"DELETE /cars should return forbidden status code","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 403\", function () {","    pm.response.to.have.status(403);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"aedbf8a9-dc4a-4d74-aebe-e1e56375bc9d","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]}],"id":"dde6f125-1151-4e80-8471-6375dfdd37b2","description":"Test for requests from user with user role."},{"name":"Moderator","item":[{"name":"Receive moderator access token","event":[{"listen":"test","script":{"id":"517bca2e-f202-4b4e-87f8-ffb25dae0aeb","exec":["// Tests","pm.test(\"Keycloak response is 200\", () => pm.expect(pm.response.code).to.equal(200));","pm.test(\"Token exists in response\", () => pm.expect(pm.response.json().access_token).to.exist);","","// Script","try {","    const body = pm.response.json();","    if (body.access_token) {","        pm.collectionVariables.set(\"moderator-token\", body.access_token);","        console.log(\"Token stored in collection variables.\");","    } else {","        console.log(\"Keycloak error response:\", body);","    }","} catch (e) {","    console.log(\"Failed to parse response:\", e.message, \"Raw text:\", pm.response.text());","}",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d161c7fe-4cc0-4f74-9e69-7fd7b760e113","exec":[""],"type":"text/javascript","packages":{}}}],"id":"95f60597-7b39-4de6-8723-ef5c3f9e3af4","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"urlencoded","urlencoded":[{"key":"grant_type","value":"password","type":"text","uuid":"6acef404-2cbd-4934-8202-32e74c1f7468"},{"key":"client_id","value":"{{car-service-client-id}}","type":"text","uuid":"8b34702f-1f40-4c6b-b62f-dd6448b6fbe1"},{"key":"client_secret","value":"{{car-service-client-secret}}","type":"text","uuid":"2451d0f1-7fe3-4495-a8d6-2871360d9a26"},{"key":"username","value":"{{moderator-username}}","type":"text","uuid":"91b50d93-83e3-4e45-9419-859c9c2e6190"},{"key":"password","value":"{{moderator-password}}","type":"text","uuid":"8b47f80b-a75f-42ea-9cac-a8034c4de2ce"}]},"url":{"raw":"{{keycloak-url}}/realms/{{car-service-realm-name}}/protocol/openid-connect/token","host":["{{keycloak-url}}"],"path":["realms","{{car-service-realm-name}}","protocol","openid-connect","token"]}},"response":[]},{"name":"GET /cars should return expected results if no parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","const expected = {","    content: [","        {","            id: \"car001\",","            manufacturerName: \"Alpha Motors\",","            productionYear: 2020,","            model: \"Zeta\",","            categoryNames: [\"Compact\", \"Luxury\"]","        },","        {","            id: \"car002\",","            manufacturerName: \"Beta Cars\",","            productionYear: 2021,","            model: \"Delta\",","            categoryNames: [\"Luxury\"]","        },","        {","            id: \"car003\",","            manufacturerName: \"Gamma Auto\",","            productionYear: 2019,","            model: \"Epsilon\",","            categoryNames: [\"Convertible\"]","        },","        {","            id: \"car004\",","            manufacturerName: \"Alpha Motors\",","            productionYear: 2022,","            model: \"Theta\",","            categoryNames: [\"Compact\"]","        },","        {","            id: \"car005\",","            manufacturerName: \"Beta Cars\",","            productionYear: 2023,","            model: \"Kappa\",","            categoryNames: [\"Luxury\"]","        }","    ],","    page: {","        size: 10,","        number: 0,","        totalElements: 5,","        totalPages: 1","    }","};","","pm.test(\"Response matches expected data\", function () {","    const actual = pm.response.json();","    pm.expect(actual).to.eql(expected);","});"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"02cc5bf3-201f-4d45-b700-b823f13d2fb3","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"GET /cars should return expected results if parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","const expected = {","    content: [","        {","            id: \"car003\",","            manufacturerName: \"Gamma Auto\",","            productionYear: 2019,","            model: \"Epsilon\",","            categoryNames: [\"Convertible\"]","        }","    ],","    page: {","        size: 10,","        number: 0,","        totalElements: 1,","        totalPages: 1","    }","};","","pm.test(\"Response matches expected data for model=Epsilon\", function () {","    const actual = pm.response.json();","    pm.expect(actual).to.eql(expected);","});"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"dfebd9d7-dbd7-4fb8-ad21-5fbd6b4c9740","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars?model=Epsilon","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"],"query":[{"key":"model","value":"Epsilon","type":"text"}]}},"response":[]},{"name":"GET /cars should return car when valid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected car details\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('id', 'car002');","    pm.expect(response).to.have.property('manufacturerName', 'Beta Cars');","    pm.expect(response).to.have.property('productionYear', 2021);","    pm.expect(response).to.have.property('model', 'Delta');","    pm.expect(response.categoryNames).to.eql([\"Luxury\"]);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"17796ab7-dd77-4004-86da-2dad8d914488","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars/car002","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars","car002"]}},"response":[]},{"name":"GET /cars should return not found when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 404\", function () {","    pm.response.to.have.status(404);","});","","pm.test(\"Response matches expected not found error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 404);","    pm.expect(response).to.have.property('message', 'No Resource Found Exception');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"f0c24425-4970-4683-96b7-191b628bb5f9","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars/invalid-id","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars","invalid-id"]}},"response":[]},{"name":"POST /cars should create new car when valid request provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 201\", function () {","    pm.response.to.have.status(201);","});","","pm.test(\"Response contains a valid 'id'\", function () {","    const response = pm.response.text();","    pm.expect(response).to.match(/^[a-f0-9\\-]{36}$/);","});"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"5f76f66f-5d97-4d17-ad6b-32c92e545b32","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"manufacturerName\": \"Alpha Motors\",\n    \"productionYear\": 1900,\n    \"model\": \"Test\",\n    \"categoryNames\":\n    [\n        \"Compact\",\n        \"Luxury\"\n    ]\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"POST /cars should return bad request when request is invalid","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 400\", function () {","    pm.response.to.have.status(400);","});","","pm.test(\"Response contains appropriate error message\", function () {","    const response = pm.response.json();","    ","    pm.expect(response).to.have.property('status', 400);","    pm.expect(response).to.have.property('message', 'Request Validation Error');","    ","    const errorDetails = response.errorDetails;","    pm.expect(errorDetails).to.have.property('categoryNames', 'At least one category has to be specified.');","    pm.expect(errorDetails).to.have.property('manufacturerName', 'Manufacturer has to be specified.');","    pm.expect(errorDetails).to.have.property('model', 'Model has to be specified.');","    pm.expect(errorDetails).to.have.property('productionYear', 'Production year has to be specified.');","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"99cc33fd-437c-4211-921a-fe41c8896edf","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"PUT /cars should update car when valid request provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches updated car details\", function () {","    const response = pm.response.json();","    ","    pm.expect(response).to.have.property('id', 'car001');","    pm.expect(response).to.have.property('manufacturerName', 'Alpha Motors');","    pm.expect(response).to.have.property('productionYear', 2020);","    pm.expect(response).to.have.property('model', 'Zeta Updated');","    pm.expect(response.categoryNames).to.eql([\"Compact\", \"Luxury\"]);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"375a0bba-8080-4c7d-81e0-985718d4d29e","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"id\": \"car001\",\n    \"manufacturerName\": \"Alpha Motors\",\n    \"productionYear\": 2020,\n    \"model\": \"Zeta Updated\",\n    \"categoryNames\":\n    [\n        \"Compact\",\n        \"Luxury\"\n    ]\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"PUT /cars should return not found when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 404\", function () {","    pm.response.to.have.status(404);","});","","pm.test(\"Response contains appropriate error message\", function () {","    const response = pm.response.json();","    ","    pm.expect(response).to.have.property('status', 404);","    pm.expect(response).to.have.property('message', 'No Resource Found Exception');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"f407f4f5-fd50-4b7c-866c-9efdd08aadd4","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"id\": \"non-existent\",\n    \"manufacturerName\": \"Non Existent\",\n    \"productionYear\": 2020,\n    \"model\": \"Non Existent\",\n    \"categoryNames\":\n    [\n        \"Non Existent\"\n    ]\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars"]}},"response":[]},{"name":"DELETE /cars should return no content when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 204\", function () {","    pm.response.to.have.status(204);","});","","pm.test(\"Response contains no content\", function () {","    const response = pm.response.text();","    pm.expect(response).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"36b2b695-e85a-433c-9ddf-4878bb2de6e4","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars/non-existent","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars","non-existent"]}},"response":[]},{"name":"DELETE /cars should return no content when valid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 204\", function () {","    pm.response.to.have.status(204);","});","","pm.test(\"Response contains no content\", function () {","    const response = pm.response.text();","    pm.expect(response).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"bf257dd3-2ed8-4628-9fc7-64538cd4f0f0","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/cars/car001","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","cars","car001"]}},"response":[]}],"id":"849034ab-18d3-4c40-a0f7-fc053f2fddec","description":"Test for requests from user with moderator role."}],"id":"e10f33e6-872c-4d02-a125-1dd7d1a75c1d","description":"Tests for operations related to cars."},{"name":"Category API","item":[{"name":"Unauthenticated","item":[{"name":"GET /categories should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"6c8fa0e3-a3bb-40d2-9b3b-6f8d8927c087","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"POST /categories should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"ac97728c-9203-4a95-9b4f-d0982565bfe3","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"javascript"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"PUT /categories should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"ecf3cc6b-da41-420e-8a70-fbc767c3de7b","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"javascript"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"DELETE /categories should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"d56378fa-1447-4aff-9099-7022863966d9","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"javascript"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]}],"id":"58b64173-5da4-49bc-b251-d935a0d007f4","description":"Test for requests from unauthenticated user."},{"name":"User","item":[{"name":"Receive user access token","event":[{"listen":"test","script":{"id":"517bca2e-f202-4b4e-87f8-ffb25dae0aeb","exec":["// Tests","pm.test(\"Keycloak response is 200\", () => pm.expect(pm.response.code).to.equal(200));","pm.test(\"Token exists in response\", () => pm.expect(pm.response.json().access_token).to.exist);","","// Script","try {","    const body = pm.response.json();","    if (body.access_token) {","        pm.collectionVariables.set(\"user-token\", body.access_token);","        console.log(\"Token stored in collection variables.\");","    } else {","        console.log(\"Keycloak error response:\", body);","    }","} catch (e) {","    console.log(\"Failed to parse response:\", e.message, \"Raw text:\", pm.response.text());","}",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d161c7fe-4cc0-4f74-9e69-7fd7b760e113","exec":[""],"type":"text/javascript","packages":{}}}],"id":"19cf956d-2883-4abd-8c99-434954a7c82b","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"urlencoded","urlencoded":[{"key":"grant_type","value":"password","type":"text","uuid":"6acef404-2cbd-4934-8202-32e74c1f7468"},{"key":"client_id","value":"{{car-service-client-id}}","type":"text","uuid":"8b34702f-1f40-4c6b-b62f-dd6448b6fbe1"},{"key":"client_secret","value":"{{car-service-client-secret}}","type":"text","uuid":"2451d0f1-7fe3-4495-a8d6-2871360d9a26"},{"key":"username","value":"{{user-username}}","type":"text","uuid":"91b50d93-83e3-4e45-9419-859c9c2e6190"},{"key":"password","value":"{{user-password}}","type":"text","uuid":"8b47f80b-a75f-42ea-9cac-a8034c4de2ce"}]},"url":{"raw":"{{keycloak-url}}/realms/{{car-service-realm-name}}/protocol/openid-connect/token","host":["{{keycloak-url}}"],"path":["realms","{{car-service-realm-name}}","protocol","openid-connect","token"]}},"response":[]},{"name":"GET /categories should return expected results if no parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected categories\", function () {","    const response = pm.response.json();","","    pm.expect(response.content).to.eql([","        { id: \"c001\", name: \"Compact\" },","        { id: \"c002\", name: \"Luxury\" },","        { id: \"c003\", name: \"Convertible\" },","        { id: \"c004\", name: \"Jeep\" }","    ]);","    ","    pm.expect(response.page).to.eql({","        size: 10,","        number: 0,","        totalElements: 4,","        totalPages: 1","    });","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"6e54932c-05ff-42a2-8030-ef946a6c7feb","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"GET /categories should return expected results if parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected categories with parameters\", function () {","    const response = pm.response.json();","","    pm.expect(response.content).to.eql([","        { id: \"c001\", name: \"Compact\" }","    ]);","    ","    pm.expect(response.page).to.eql({","        size: 10,","        number: 0,","        totalElements: 1,","        totalPages: 1","    });","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"43786f29-7246-45f9-a278-c65d178210c3","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories?name=Compact","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"],"query":[{"key":"name","value":"Compact"}]}},"response":[]},{"name":"GET /categories should return category when valid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected category details\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('id', 'c001');","    pm.expect(response).to.have.property('name', 'Compact');","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"ddcc8b6a-40d1-4636-a25a-7a0271b0bd4d","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories/c001","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories","c001"]}},"response":[]},{"name":"GET /categories should return not found when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 404\", function () {","    pm.response.to.have.status(404);","});","","pm.test(\"Response matches expected not found error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 404);","    pm.expect(response).to.have.property('message', 'No Resource Found Exception');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"afa6a6ca-1692-48a0-b901-a1ed3615dec8","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories/invalid-id","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories","invalid-id"]}},"response":[]},{"name":"POST /categories should return forbidden status code","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 403\", function () {","    pm.response.to.have.status(403);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"1d05b3d8-d55b-483c-9f87-403c3ecb9354","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"PUT /categories should return forbidden status code","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 403\", function () {","    pm.response.to.have.status(403);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"42f449a9-4b57-49fb-80e0-4f97d6c4747b","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"DELETE /categories should return forbidden status code","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 403\", function () {","    pm.response.to.have.status(403);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"b27dfb1b-b3f9-44a4-ab7c-6a0759e61888","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]}],"id":"49a03885-1822-47a9-95dc-56f47f26e5f0","description":"Test for requests from user with user role."},{"name":"Moderator","item":[{"name":"Receive moderator access token","event":[{"listen":"test","script":{"id":"517bca2e-f202-4b4e-87f8-ffb25dae0aeb","exec":["// Tests","pm.test(\"Keycloak response is 200\", () => pm.expect(pm.response.code).to.equal(200));","pm.test(\"Token exists in response\", () => pm.expect(pm.response.json().access_token).to.exist);","","// Script","try {","    const body = pm.response.json();","    if (body.access_token) {","        pm.collectionVariables.set(\"moderator-token\", body.access_token);","        console.log(\"Token stored in collection variables.\");","    } else {","        console.log(\"Keycloak error response:\", body);","    }","} catch (e) {","    console.log(\"Failed to parse response:\", e.message, \"Raw text:\", pm.response.text());","}",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d161c7fe-4cc0-4f74-9e69-7fd7b760e113","exec":[""],"type":"text/javascript","packages":{}}}],"id":"c65b5d77-a1ee-41c7-8362-a374f26ef889","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"urlencoded","urlencoded":[{"key":"grant_type","value":"password","type":"text","uuid":"6acef404-2cbd-4934-8202-32e74c1f7468"},{"key":"client_id","value":"{{car-service-client-id}}","type":"text","uuid":"8b34702f-1f40-4c6b-b62f-dd6448b6fbe1"},{"key":"client_secret","value":"{{car-service-client-secret}}","type":"text","uuid":"2451d0f1-7fe3-4495-a8d6-2871360d9a26"},{"key":"username","value":"{{moderator-username}}","type":"text","uuid":"91b50d93-83e3-4e45-9419-859c9c2e6190"},{"key":"password","value":"{{moderator-password}}","type":"text","uuid":"8b47f80b-a75f-42ea-9cac-a8034c4de2ce"}]},"url":{"raw":"{{keycloak-url}}/realms/{{car-service-realm-name}}/protocol/openid-connect/token","host":["{{keycloak-url}}"],"path":["realms","{{car-service-realm-name}}","protocol","openid-connect","token"]}},"response":[]},{"name":"GET /categories should return expected results if no parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected categories\", function () {","    const response = pm.response.json();","","    pm.expect(response.content).to.eql([","        { id: \"c001\", name: \"Compact\" },","        { id: \"c002\", name: \"Luxury\" },","        { id: \"c003\", name: \"Convertible\" },","        { id: \"c004\", name: \"Jeep\" }","    ]);","    ","    pm.expect(response.page).to.eql({","        size: 10,","        number: 0,","        totalElements: 4,","        totalPages: 1","    });","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"26fed6a1-02aa-4e9e-935a-c46f6f2e70ef","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"GET /categories should return expected results if parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected filtered category\", function () {","    const response = pm.response.json();","","    pm.expect(response.content).to.eql([","        { id: \"c001\", name: \"Compact\" }","    ]);","","    pm.expect(response.page).to.eql({","        size: 10,","        number: 0,","        totalElements: 1,","        totalPages: 1","    });","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"ead76b81-cce7-465f-9e11-120d8d8bca0f","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories?name=Compact","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"],"query":[{"key":"name","value":"Compact"}]}},"response":[]},{"name":"GET /categories should return category when valid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected category by id\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('id', 'c001');","    pm.expect(response).to.have.property('name', 'Compact');","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"0dc08f7c-545c-4c97-89f7-46803ade7372","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories/c001","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories","c001"]}},"response":[]},{"name":"GET /categories should return not found when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 404\", function () {","    pm.response.to.have.status(404);","});","","pm.test(\"Response matches expected not found error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 404);","    pm.expect(response).to.have.property('message', 'No Resource Found Exception');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"e75630ac-d138-4ebf-9bf6-bfb5f1dde8d6","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories/invalid-id","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories","invalid-id"]}},"response":[]},{"name":"POST /categories should create new category when valid request provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 201\", function () {","    pm.response.to.have.status(201);","});","","pm.test(\"Response contains a valid 'id'\", function () {","    const response = pm.response.text();","    pm.expect(response).to.match(/^[a-f0-9\\-]{36}$/);","});"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"7bc11eb0-e2a1-4d20-a8b8-ec3be15e19c9","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"name\": \"Electric\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"POST /categories should return bad request when request is invalid","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 400\", function () {","    pm.response.to.have.status(400);","});","","pm.test(\"Response matches expected validation error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 400);","    pm.expect(response).to.have.property('message', 'Request Validation Error');","    pm.expect(response.errorDetails).to.have.property('name', 'Name has to be specified.');","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"11fff6af-4e3f-46c9-9768-81b7c50c91ef","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"PUT /categories should update category when valid request provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches updated category\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('id', 'c001');","    pm.expect(response).to.have.property('name', 'Compact Updated');","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"4e6dcec1-8f17-4b2d-8ac5-47b01f4b08c5","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"id\": \"c001\",\n    \"name\": \"Compact Updated\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"PUT /categories should return not found when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 404\", function () {","    pm.response.to.have.status(404);","});","","pm.test(\"Response contains appropriate error message\", function () {","    const response = pm.response.json();","    ","    pm.expect(response).to.have.property('status', 404);","    pm.expect(response).to.have.property('message', 'No Resource Found Exception');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"1734dab1-3782-43a9-b5ca-e199d2a0ee4b","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"id\": \"non-existent\",\n    \"name\": \"Non Existent\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories"]}},"response":[]},{"name":"DELETE /categories should return no content when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 204\", function () {","    pm.response.to.have.status(204);","});","","pm.test(\"Response contains no content\", function () {","    const response = pm.response.text();","    pm.expect(response).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"281f68b5-dce7-4a95-a5bf-f21d09c7a6d7","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories/non-existent","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories","non-existent"]}},"response":[]},{"name":"DELETE /categories should return conflict when category is in use","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 409\", function () {","    pm.response.to.have.status(409);","});","","pm.test(\"Response matches expected conflict error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 409);","    pm.expect(response).to.have.property('message', 'Resource Cannot Be Deleted Due To Dependencies');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"2cc038cc-13b0-4d64-bff3-08edc581fa0a","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories/c001","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories","c001"]}},"response":[]},{"name":"DELETE /categories should return no content when valid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 204\", function () {","    pm.response.to.have.status(204);","});","","pm.test(\"Response contains no content\", function () {","    const response = pm.response.text();","    pm.expect(response).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"adc0aa43-2a9b-4768-9105-8ef362c21ee7","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/categories/c004","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","categories","c004"]}},"response":[]}],"id":"b6493fba-8422-4838-89de-e41b89204837","description":"Test for requests from user with moderator role."}],"id":"b0c405c1-c9a2-4d43-acb0-d330f0fcd3c8","description":"Tests for operations related to categories."},{"name":"Manufacturer API","item":[{"name":"Unauthenticated","item":[{"name":"GET /manufacturers should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"0df55afa-d582-40f6-aa41-f5bbb0a8423e","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"POST /manufacturers should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"cf5e20c5-2d40-4241-90c0-c37f38f5e395","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"javascript"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"PUT /manufacturers should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"ae345aea-0457-4900-b8db-9b15296d3664","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"javascript"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"DELETE /manufacturers should return unauthorized status code if user is not authenticated","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"52f1c9da-e0a5-45a8-9d0b-9236e6716a78","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"javascript"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]}],"id":"a7dc3570-eeee-44ca-956e-e9f49945c3f3","description":"Test for requests from unauthenticated user."},{"name":"User","item":[{"name":"Receive user access token","event":[{"listen":"test","script":{"id":"517bca2e-f202-4b4e-87f8-ffb25dae0aeb","exec":["// Tests","pm.test(\"Keycloak response is 200\", () => pm.expect(pm.response.code).to.equal(200));","pm.test(\"Token exists in response\", () => pm.expect(pm.response.json().access_token).to.exist);","","// Script","try {","    const body = pm.response.json();","    if (body.access_token) {","        pm.collectionVariables.set(\"user-token\", body.access_token);","        console.log(\"Token stored in collection variables.\");","    } else {","        console.log(\"Keycloak error response:\", body);","    }","} catch (e) {","    console.log(\"Failed to parse response:\", e.message, \"Raw text:\", pm.response.text());","}",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d161c7fe-4cc0-4f74-9e69-7fd7b760e113","exec":[""],"type":"text/javascript","packages":{}}}],"id":"048bd461-aaaa-4233-b039-bcdfc27785b3","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"urlencoded","urlencoded":[{"key":"grant_type","value":"password","type":"text","uuid":"6acef404-2cbd-4934-8202-32e74c1f7468"},{"key":"client_id","value":"{{car-service-client-id}}","type":"text","uuid":"8b34702f-1f40-4c6b-b62f-dd6448b6fbe1"},{"key":"client_secret","value":"{{car-service-client-secret}}","type":"text","uuid":"2451d0f1-7fe3-4495-a8d6-2871360d9a26"},{"key":"username","value":"{{user-username}}","type":"text","uuid":"91b50d93-83e3-4e45-9419-859c9c2e6190"},{"key":"password","value":"{{user-password}}","type":"text","uuid":"8b47f80b-a75f-42ea-9cac-a8034c4de2ce"}]},"url":{"raw":"{{keycloak-url}}/realms/{{car-service-realm-name}}/protocol/openid-connect/token","host":["{{keycloak-url}}"],"path":["realms","{{car-service-realm-name}}","protocol","openid-connect","token"]}},"response":[]},{"name":"GET /manufacturers should return expected results if no parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected manufacturers list\", function () {","    const response = pm.response.json();","","    pm.expect(response.content).to.eql([","        { id: \"m001\", name: \"Alpha Motors\" },","        { id: \"m002\", name: \"Beta Cars\" },","        { id: \"m003\", name: \"Gamma Auto\" },","        { id: \"m004\", name: \"Delta Vehicles\" }","    ]);","","    pm.expect(response.page).to.eql({","        size: 10,","        number: 0,","        totalElements: 4,","        totalPages: 1","    });","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"48dba715-7527-44f8-8c01-aa057ba97cb8","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"GET /manufacturers should return expected results if parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected filtered manufacturers\", function () {","    const response = pm.response.json();","","    pm.expect(response.content).to.eql([","        { id: \"m001\", name: \"Alpha Motors\" }","    ]);","","    pm.expect(response.page).to.eql({","        size: 10,","        number: 0,","        totalElements: 1,","        totalPages: 1","    });","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"a27f6d44-e553-42a4-aca8-27916d5c50f9","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers?name=Alpha Motors","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"],"query":[{"key":"name","value":"Alpha Motors"}]}},"response":[]},{"name":"GET /manufacturers should return manufacturer when valid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected manufacturer details\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('id', 'm001');","    pm.expect(response).to.have.property('name', 'Alpha Motors');","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"55351633-af25-4d9d-830f-204c9dfd2b9b","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers/m001","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers","m001"]}},"response":[]},{"name":"GET /manufacturers should return not found when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 404\", function () {","    pm.response.to.have.status(404);","});","","pm.test(\"Response matches expected not found error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 404);","    pm.expect(response).to.have.property('message', 'No Resource Found Exception');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"e1878c0d-b543-404d-9de3-422e00606b0f","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers/invalid-id","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers","invalid-id"]}},"response":[]},{"name":"POST /manufacturers should return forbidden status code","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 403\", function () {","    pm.response.to.have.status(403);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"1125f840-0c1e-4717-87d7-32eb287e03d4","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"PUT /manufacturers should return forbidden status code","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 403\", function () {","    pm.response.to.have.status(403);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"6ae7d23e-ffde-4bf3-989f-aa803979e0b8","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"DELETE /manufacturers should return forbidden status code","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 403\", function () {","    pm.response.to.have.status(403);","});","","pm.test(\"Response body is empty\", function () {","    pm.expect(pm.response.text()).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"4615e4cc-1e5f-46d0-ab93-40d20dcfb35c","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{user-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]}],"id":"6c576ff0-cd59-4878-8418-673a58c51472","description":"Test for requests from user with user role."},{"name":"Moderator","item":[{"name":"Receive moderator access token","event":[{"listen":"test","script":{"id":"517bca2e-f202-4b4e-87f8-ffb25dae0aeb","exec":["// Tests","pm.test(\"Keycloak response is 200\", () => pm.expect(pm.response.code).to.equal(200));","pm.test(\"Token exists in response\", () => pm.expect(pm.response.json().access_token).to.exist);","","// Script","try {","    const body = pm.response.json();","    if (body.access_token) {","        pm.collectionVariables.set(\"moderator-token\", body.access_token);","        console.log(\"Token stored in collection variables.\");","    } else {","        console.log(\"Keycloak error response:\", body);","    }","} catch (e) {","    console.log(\"Failed to parse response:\", e.message, \"Raw text:\", pm.response.text());","}",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d161c7fe-4cc0-4f74-9e69-7fd7b760e113","exec":[""],"type":"text/javascript","packages":{}}}],"id":"3ec2f03f-55d3-4fdc-8f06-0dd034ae98f4","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"urlencoded","urlencoded":[{"key":"grant_type","value":"password","type":"text","uuid":"6acef404-2cbd-4934-8202-32e74c1f7468"},{"key":"client_id","value":"{{car-service-client-id}}","type":"text","uuid":"8b34702f-1f40-4c6b-b62f-dd6448b6fbe1"},{"key":"client_secret","value":"{{car-service-client-secret}}","type":"text","uuid":"2451d0f1-7fe3-4495-a8d6-2871360d9a26"},{"key":"username","value":"{{moderator-username}}","type":"text","uuid":"91b50d93-83e3-4e45-9419-859c9c2e6190"},{"key":"password","value":"{{moderator-password}}","type":"text","uuid":"8b47f80b-a75f-42ea-9cac-a8034c4de2ce"}]},"url":{"raw":"{{keycloak-url}}/realms/{{car-service-realm-name}}/protocol/openid-connect/token","host":["{{keycloak-url}}"],"path":["realms","{{car-service-realm-name}}","protocol","openid-connect","token"]}},"response":[]},{"name":"GET /manufacturers should return expected results if no parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected manufacturers list\", function () {","    const response = pm.response.json();","","    pm.expect(response.content).to.eql([","        { id: \"m001\", name: \"Alpha Motors\" },","        { id: \"m002\", name: \"Beta Cars\" },","        { id: \"m003\", name: \"Gamma Auto\" },","        { id: \"m004\", name: \"Delta Vehicles\" }","    ]);","","    pm.expect(response.page).to.eql({","        size: 10,","        number: 0,","        totalElements: 4,","        totalPages: 1","    });","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"8a987f81-bd96-4966-94ad-738151fd4087","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"GET /manufacturers should return expected results if parameters provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected filtered manufacturers\", function () {","    const response = pm.response.json();","","    pm.expect(response.content).to.eql([","        { id: \"m001\", name: \"Alpha Motors\" }","    ]);","","    pm.expect(response.page).to.eql({","        size: 10,","        number: 0,","        totalElements: 1,","        totalPages: 1","    });","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"77e6806c-5094-483a-ac53-4f89192b180e","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers?name=Alpha Motors","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"],"query":[{"key":"name","value":"Alpha Motors"}]}},"response":[]},{"name":"GET /manufacturers should return manufacturer when valid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches expected manufacturer details\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('id', 'm001');","    pm.expect(response).to.have.property('name', 'Alpha Motors');","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"316a9814-6100-41c7-88a9-aadfd50f3a9d","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers/m001","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers","m001"]}},"response":[]},{"name":"GET /manufacturers should return not found when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 404\", function () {","    pm.response.to.have.status(404);","});","","pm.test(\"Response matches expected not found error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 404);","    pm.expect(response).to.have.property('message', 'No Resource Found Exception');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"188c34af-c45f-4226-91e0-b3131c074d38","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers/invalid-id","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers","invalid-id"]}},"response":[]},{"name":"POST /manufacturers should create new manufacturer when valid request provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 201\", function () {","    pm.response.to.have.status(201);","});","","pm.test(\"Response contains a valid 'id'\", function () {","    const response = pm.response.text();","    pm.expect(response).to.match(/^[a-f0-9\\-]{36}$/);","});"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"506b5116-ca5c-4a2a-8d14-994076d2104a","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"name\": \"Electric Motors\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"POST /manufacturers should return bad request when request is invalid","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 400\", function () {","    pm.response.to.have.status(400);","});","","pm.test(\"Response matches expected validation error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 400);","    pm.expect(response).to.have.property('message', 'Request Validation Error');","    pm.expect(response.errorDetails).to.have.property('name', 'Name has to be specified.');","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"c4c621da-61e4-4148-899c-5475871156c2","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"POST","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"PUT /manufacturers should update manufacturer when valid request provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Response matches updated category\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('id', 'm001');","    pm.expect(response).to.have.property('name', 'Alpha Motors Updated');","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"bb6dcf33-00b3-4682-a63a-1dbf8e2be29f","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"id\": \"m001\",\n    \"name\": \"Alpha Motors Updated\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"PUT /manufacturers should return not found when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 404\", function () {","    pm.response.to.have.status(404);","});","","pm.test(\"Response contains appropriate error message\", function () {","    const response = pm.response.json();","    ","    pm.expect(response).to.have.property('status', 404);","    pm.expect(response).to.have.property('message', 'No Resource Found Exception');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"10533c10-d46d-4155-af18-7cb3bc3aed9b","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"PUT","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"id\": \"non-existent\",\n    \"name\": \"Non Existent\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers"]}},"response":[]},{"name":"DELETE /manufacturers should return no content when invalid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 204\", function () {","    pm.response.to.have.status(204);","});","","pm.test(\"Response contains no content\", function () {","    const response = pm.response.text();","    pm.expect(response).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"6cde0f24-2a49-4c08-81e3-82c18fd10212","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers/non-existent","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers","non-existent"]}},"response":[]},{"name":"DELETE /manufacturers should return conflict when category is in use","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 409\", function () {","    pm.response.to.have.status(409);","});","","pm.test(\"Response matches expected conflict error\", function () {","    const response = pm.response.json();","","    pm.expect(response).to.have.property('status', 409);","    pm.expect(response).to.have.property('message', 'Resource Cannot Be Deleted Due To Dependencies');","    pm.expect(response).to.have.property('errorDetails', null);","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"d789aa04-e989-4c33-8b34-2ece5daa642e","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers/m001","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers","m001"]}},"response":[]},{"name":"DELETE /manufacturers should return no content when valid id provided","event":[{"listen":"test","script":{"id":"e6aa92c3-e37c-4ea6-bfc4-80a27d21edcc","exec":["pm.test(\"Status code is 204\", function () {","    pm.response.to.have.status(204);","});","","pm.test(\"Response contains no content\", function () {","    const response = pm.response.text();","    pm.expect(response).to.be.empty;","});",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d78c6c9e-107f-4134-8e61-45018ba9b1f8","exec":[""],"type":"text/javascript","packages":{}}}],"id":"e05e1c9a-9832-4983-92e7-fb8d15b91cd2","protocolProfileBehavior":{"disableBodyPruning":true,"followAuthorizationHeader":true},"request":{"auth":{"type":"noauth"},"method":"DELETE","header":[{"key":"Authorization","value":"Bearer {{moderator-token}}","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{car-service-url}}/api/{{car-service-api-version}}/manufacturers/m004","host":["{{car-service-url}}"],"path":["api","{{car-service-api-version}}","manufacturers","m004"]}},"response":[]}],"id":"97ac6260-5a90-4163-af18-cb0e6d0b2007","description":"Test for requests from user with moderator role."}],"id":"febb3ac5-f28b-46bd-aba3-685d4d36fbfc","description":"Tests for operations related to manufacturers."}],"auth":{"type":"oauth2","oauth2":[{"key":"tokenName","value":"moderator-token","type":"string"},{"key":"clientId","value":"{{car-service-client-id}}","type":"string"},{"key":"password","value":"{{moderator-password}}","type":"string"},{"key":"username","value":"{{moderator-username}}","type":"string"},{"key":"accessTokenUrl","value":"{{keycloak-url}}/realms/{{car-service-realm-name}}/protocol/openid-connect/token","type":"string"},{"key":"clientSecret","value":"{{car-service-client-secret}}","type":"string"},{"key":"client_authentication","value":"body","type":"string"},{"key":"grant_type","value":"password_credentials","type":"string"},{"key":"addTokenTo","value":"header","type":"string"}]},"event":[{"listen":"prerequest","script":{"id":"f0d8cd51-bf2a-4f95-8bae-fbe380de0820","type":"text/javascript","packages":{},"exec":[""]}},{"listen":"test","script":{"id":"615f0d9c-9ef2-4d2d-9cd9-448e61cbf1f3","type":"text/javascript","packages":{},"exec":[""]}}],"variable":[{"id":"0da61b14-35eb-41cc-9efc-5432d3b3daab","key":"car-service-client-id","value":"car-service-client","type":"default"},{"id":"b264b5c1-68d9-4541-bda7-f5bfa2135954","key":"car-service-client-secret","value":"test-client-secret","type":"default"},{"id":"34ac7aa5-0872-49f5-b5ee-3afe5478849b","key":"car-service-realm-name","value":"car-service","type":"string"},{"id":"18269743-9310-4c3c-801d-6af3cb0173b6","key":"car-service-url","value":"car-service:8080","type":"string"},{"id":"aec162d8-0b30-48f9-ad07-15d42c589815","key":"keycloak-url","value":"keycloak:8180","type":"string"},{"id":"ddcbd8a4-e1cb-46a1-8d79-150919ed2547","key":"moderator-username","value":"test-moderator","type":"string"},{"id":"18c6d38c-8812-4e83-be9e-e227beac17bf","key":"moderator-password","value":"test","type":"string"},{"id":"c89bc4d4-9e41-47ef-96a1-be22c43db2ce","key":"user-username","value":"test-user","type":"string"},{"id":"47f939f4-6772-41f6-8484-83eb902d6579","key":"user-password","value":"test","type":"string"},{"id":"688b7882-9a36-4357-8ee5-5d4f3e7660d9","key":"car-service-api-version","value":"v1","type":"string"},{"id":"412b8363-59e5-4cc6-96a3-8388c036ed6c","key":"moderator-token","value":""},{"id":"efccef19-75f7-4d66-9808-dcab89ef7f62","key":"user-token","value":"","type":"string"}]}